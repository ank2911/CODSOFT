import React, { useState, useEffect } from 'react';
import { Modal, Button, Form } from 'react-bootstrap';
import { useNavigate } from 'react-router-dom';

const SubscriptionPopup = ({ show, onHide, currentUrl }) => {
  const [newsletterType, setNewsletterType] = useState('');
  const [newsType, setNewsType] = useState('');
  const [duration, setDuration] = useState(1);
  const [totalPrice, setTotalPrice] = useState(0);
  const navigate = useNavigate();

  const newsletterPrices = {
    newspaper: 50,
    magazine: 100,
    both: 120,
  };

  const newsTypePrices = {
    online: 20,
    offline: 30,
    both: 40,
  };

  const handleCalculatePrice = () => {
    const newsletterPrice = newsletterPrices[newsletterType] || 0;
    const newsTypePrice = newsTypePrices[newsType] || 0;
    const price = (newsletterPrice + newsTypePrice) * duration;
    setTotalPrice(price);
  };

  useEffect(() => {
    handleCalculatePrice();
  }, [newsletterType, newsType, duration]);

  const handleSubscribe = () => {
    localStorage.setItem('subscriptionDetails', JSON.stringify({
      newsletterType,
      newsType,
      duration,
      totalPrice,
    }));
    localStorage.setItem('isSubscribed', 'true');
    onHide();
    navigate('/payment');
  };

  return (
    <Modal show={show} onHide={onHide} centered>
      <Modal.Header closeButton>
        <Modal.Title>Subscribe to a Newsletter</Modal.Title>
      </Modal.Header>
      <Modal.Body>
        <Form>
          <Form.Group controlId="formNewsletterType">
            <Form.Label>Newsletter Type</Form.Label>
            <Form.Control as="select" value={newsletterType} onChange={(e) => setNewsletterType(e.target.value)}>
              <option value="">Select...</option>
              <option value="newspaper">Newspaper - 50 Rs</option>
              <option value="magazine">Magazine - 100 Rs</option>
              <option value="both">Both - 120 Rs</option>
            </Form.Control>
          </Form.Group>

          <Form.Group controlId="formNewsType">
            <Form.Label>News Type</Form.Label>
            <Form.Control as="select" value={newsType} onChange={(e) => setNewsType(e.target.value)}>
              <option value="">Select...</option>
              <option value="online">Online - 20 Rs</option>
              <option value="offline">Offline - 30 Rs</option>
              <option value="both">Both - 40 Rs</option>
            </Form.Control>
          </Form.Group>

          <Form.Group controlId="formDuration">
            <Form.Label>Duration (Months)</Form.Label>
            <Form.Control as="select" value={duration} onChange={(e) => setDuration(Number(e.target.value))}>
              {[...Array(12).keys()].map(i => (
                <option key={i+1} value={i+1}>{i+1}</option>
              ))}
            </Form.Control>
          </Form.Group>

          <div className="mt-3">
            <strong>Total Price: {totalPrice} Rs.</strong>
          </div>

          <Button variant="primary" className="mt-3" onClick={handleSubscribe}>
            Pay Now
          </Button>
        </Form>
      </Modal.Body>
    </Modal>
  );
};

export default SubscriptionPopup;



import React from 'react';
import { Container, Button } from 'react-bootstrap';
import { useNavigate } from 'react-router-dom';

const SubscriptionPage = () => {
  const navigate = useNavigate();
  const subscriptionDetails = JSON.parse(localStorage.getItem('subscriptionDetails')) || {};
  const isSubscribed = localStorage.getItem('isSubscribed') === 'true';

  const handleRenew = () => {
    navigate('/');
  };

  if (!isSubscribed) {
    return (
      <Container>
        <h2>Subscription Page</h2>
        <p>You are not currently subscribed to any newsletters.</p>
      </Container>
    );
  }

  return (
    <Container>
      <h2>Subscription Page</h2>
      <p>Newsletter Type: {subscriptionDetails.newsletterType}</p>
      <p>News Type: {subscriptionDetails.newsType}</p>
      <p>Duration: {subscriptionDetails.duration} months</p>
      <p>Total Price: {subscriptionDetails.totalPrice} Rs.</p>

      <Button variant="primary" onClick={handleRenew}>
        Renew Subscription
      </Button>
    </Container>
  );
};

export default SubscriptionPage;




.read-more-btn {
  position: absolute;
  bottom: 10px;
  left: 10px;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-header .close {
  margin-left: auto;
}

.custom-dropdown {
  position: relative;
}

.custom-dropdown .close-btn {
  position: absolute;
  top: 0;
  right: 0;
  cursor: pointer;
}

